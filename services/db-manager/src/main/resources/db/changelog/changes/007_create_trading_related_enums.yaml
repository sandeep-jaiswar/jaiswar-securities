databaseChangeLog:
  - changeSet:
      id: create_trading_related_enums_007_rev1
      author: gemini-idx-assistant
      changes:
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'market_data_type_enum') THEN
                CREATE TYPE market_data_type_enum AS ENUM (
                  'TRADE', 'QUOTE', 'BID', 'ASK', 'MIDPOINT', 'TRADING_SESSION_HIGH_PRICE', 'TRADING_SESSION_LOW_PRICE', 
                  'TRADE_VOLUME', 'OPEN_INTEREST', 'EMPTY_BOOK', 'SECURITY_STATUS', 
                  'OPENING_PRICE', 'CLOSING_PRICE', 'SETTLEMENT_PRICE' 
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'order_type_enum') THEN
                CREATE TYPE order_type_enum AS ENUM (
                  'MARKET', 'LIMIT', 'STOP', 'STOP_LIMIT', 'MARKET_ON_CLOSE', 'LIMIT_ON_CLOSE', 
                  'PEGGED', 'MARKET_WITH_LEFTOVER_AS_LIMIT', 'PREVIOUSLY_QUOTED', 'PREVIOUSLY_INDICATED',
                  'FOREX_MARKET', 'FOREX_LIMIT', 'FOREX_SWAP', 'FOREX_PREVIOUSLY_QUOTED', 'FUNARI', 
                  'MARKET_IF_TOUCHED', 'STOP_LOSS_LIMIT' 
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'order_status_enum') THEN
                CREATE TYPE order_status_enum AS ENUM (
                  'NEW', 'PARTIALLY_FILLED', 'FILLED', 'DONE_FOR_DAY', 'CANCELED', 'REPLACED', 
                  'PENDING_CANCEL', 'STOPPED', 'REJECTED', 'SUSPENDED', 'PENDING_NEW', 'CALCULATED', 
                  'EXPIRED', 'ACCEPTED_FOR_BIDDING', 'PENDING_REPLACE', 'UNKNOWN'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'order_side_enum') THEN
                CREATE TYPE order_side_enum AS ENUM (
                  'BUY', 'SELL', 'SELL_SHORT', 'SELL_SHORT_EXEMPT', 'BUY_TO_COVER', 
                  'CROSS', 'CROSS_SHORT', 'AS_DEFINED', 'OPPOSITE'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'time_in_force_enum') THEN
                CREATE TYPE time_in_force_enum AS ENUM (
                  'DAY', 'GTC', 'OPG', 'IOC', 'FOK', 'GTX', 'GTD', 'AUC', 'FILL_OR_KILL', 'GOOD_THRU_DATE'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN 
                IF EXISTS (SELECT 1 FROM pg_type WHERE typname = 'exec_type_enum') THEN
                  -- Add new values to existing enum if necessary, or drop and recreate if simpler and no data loss risk
                  -- For simplicity here, assuming we can recreate if it's a fresh setup or controlled environment
                  -- In a live system, ALTER TYPE ... ADD VALUE IF NOT EXISTS would be used carefully.
                  DROP TYPE exec_type_enum CASCADE; -- Use with caution, CASCADE drops dependent objects
                END IF;
                CREATE TYPE exec_type_enum AS ENUM (
                  'NEW',                          -- 0 - Order acknowledged
                  'PARTIALLY_FILLED',             -- 1 - Partial fill (often OrdStatus is PARTIALLY_FILLED)
                  'FILLED',                       -- 2 - Full fill (often OrdStatus is FILLED)
                  'DONE_FOR_DAY',                 -- 3 - Order valid for day is done
                  'CANCELED',                     -- 4 - Order canceled
                  'REPLACED',                     -- 5 - Order replaced
                  'PENDING_CANCEL',             -- 6 - Cancel request is pending
                  'STOPPED',                      -- 7 - Order stopped by exchange
                  'REJECTED',                     -- 8 - Order rejected
                  'SUSPENDED',                    -- 9 - Order suspended
                  'PENDING_NEW',                  -- A - Pending new order acknowledgement
                  'CALCULATED',                   -- B - Order calculated (e.g. VWAP)
                  'EXPIRED',                      -- C - Order expired
                  'RESTATED',                     -- D - Order restated (e.g. price change on GTC)
                  'PENDING_REPLACE',              -- E - Replace request is pending
                  'TRADE',                        -- F - Actual execution report for a fill/partial fill
                  'TRADE_CORRECT',                -- G - Corrected trade execution report
                  'TRADE_CANCEL',                 -- H - Canceled trade execution report
                  'ORDER_STATUS',                 -- I - Response to an Order Status Request message
                  'TRADE_IN_A_CLEARING_HOLD',     -- J - Trade is in a clearing hold
                  'TRADE_HAS_BEEN_RELEASED_TO_CLEARING', -- K - Trade released to clearing
                  'TRIGGERED_OR_ACTIVATED_BY_SYSTEM' -- L - Order has been triggered or activated by a system
                );
              END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'trade_report_type_enum') THEN
                CREATE TYPE trade_report_type_enum AS ENUM (
                  'SUBMIT', 'ALLEGED', 'ACCEPT', 'DECLINE', 'ADDENDUM', 'NO_WAS', 'TRADE_REPORT_CANCEL', 
                  'LOCKED_IN', 'DEFAULTED', 'INVALID_CMTA', 'PENDED_VERIFY', 'REJECTED', 
                  'TRADE_BREAK', 'VERIFIED'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'trade_status_internal_enum') THEN
                CREATE TYPE trade_status_internal_enum AS ENUM (
                  'PENDING_VALIDATION', 'PENDING_CLEARING', 'PENDING_SETTLEMENT', 'SETTLED', 'CANCELED', 
                  'ALLOCATED', 'FAILED_SETTLEMENT', 'REJECTED_BY_CLEARING', 'REJECTED_BY_COUNTERPARTY'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'position_type_enum') THEN
                CREATE TYPE position_type_enum AS ENUM (
                  'INTRADAY', 'OVERNIGHT', 'SETTLED', 'PENDING_RECEIPT', 'PENDING_DELIVERY', 
                  'START_OF_DAY', 'END_OF_DAY'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false
        - sql:
            sql: |
              DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'price_type_enum') THEN
                CREATE TYPE price_type_enum AS ENUM (
                  'PERCENTAGE', 'PER_UNIT', 'FIXED_AMOUNT', 'DISCOUNT', 'PREMIUM', 'SPREAD', 'TED_PRICE', 
                  'TED_YIELD', 'YIELD', 'FIXED_CABINET_TRADE_PRICE', 'VARIABLE_CABINET_TRADE_PRICE'
                ); END IF; END $$;
            dbms: postgresql
            splitStatements: false

databaseChangeLog:
  - changeSet:
      id: alter_instruments_add_issuer_fk_027
      author: gemini-idx-assistant
      changes:
        - addColumn:
            tableName: instruments
            columns:
              - column:
                  name: issuer_id
                  type: UUID
                  constraints:
                    foreignKeyName: fk_instruments_issuer_id
                    references: issuers(issuer_id)
                    # Making it nullable, as not all instruments might have an issuer initially,
                    # or some instrument types might not have a traditional issuer (e.g., FX, some commodities if modeled as instruments)
                    nullable: true
        - createIndex:
            indexName: idx_instruments_issuer_id
            tableName: instruments
            columns:
              - column:
                  name: issuer_id
